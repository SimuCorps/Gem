<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Type System - Gem Programming Language</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="docs.css">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="index.html" style="display: flex; align-items: center; gap: 0.5rem; text-decoration: none; color: inherit;">
                    <span class="gem-icon">üíé</span>
                    <span class="brand-text">Gem</span>
                </a>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="getting-started.html" class="nav-link">Getting Started</a></li>
                <li><a href="language-guide.html" class="nav-link">Language Guide</a></li>
                <li><a href="type-system.html" class="nav-link active">Type System</a></li>
                <li><a href="https://github.com/SimuCorps/Gem" class="nav-link" target="_blank">GitHub</a></li>
            </ul>
        </div>
    </nav>

    <main class="docs-main">
        <div class="container">
            <div class="docs-layout">
                <aside class="docs-sidebar">
                    <nav class="docs-nav">
                        <h3>Type System</h3>
                        <ul>
                            <li><a href="#overview">Overview</a></li>
                            <li><a href="#basic-types">Basic Types</a></li>
                            <li><a href="#mutability">Mutability Control</a></li>
                            <li><a href="#nullability">Nullability Safety</a></li>
                            <li><a href="#combined">Combined Modifiers</a></li>
                            <li><a href="#type-checking">Type Checking</a></li>
                            <li><a href="#advanced">Advanced Features</a></li>
                        </ul>
                    </nav>
                </aside>

                <article class="docs-content">
                    <header class="docs-header">
                        <h1>Gem Type System</h1>
                        <p class="docs-subtitle">Deep dive into Gem's enhanced type system with mutability and nullability control</p>
                    </header>

                    <section id="overview" class="docs-section">
                        <h2>Type System Overview</h2>
                        <p>Gem's type system is designed to prevent common programming errors while maintaining elegance and expressiveness. It provides compile-time safety without sacrificing readability.</p>

                        <h3>Core Principles</h3>
                        <ul>
                            <li><strong>Static Typing</strong> - All types are known at compile time</li>
                            <li><strong>Explicit Types</strong> - Variables must have declared types</li>
                            <li><strong>Immutable by Default</strong> - Variables cannot be reassigned unless explicitly marked mutable</li>
                            <li><strong>Null Safety</strong> - Null pointer exceptions are prevented by design</li>
                            <li><strong>Zero Runtime Cost</strong> - Type safety checks happen at compile time</li>
                        </ul>

                        <div class="info-box">
                            <h4>üéØ Design Philosophy</h4>
                            <p>Gem's type system provides developer happiness with compile-time guarantees, without syntactic complexity.</p>
                        </div>
                    </section>

                    <section id="basic-types" class="docs-section">
                        <h2>Basic Types</h2>
                        <p>Gem provides a small set of fundamental types that cover most programming needs.</p>

                        <h3>Primitive Types</h3>
                        <div class="code-block">
                            <pre><code># Integer type
int age = 25;
int population = 1000000;
int negative = -42;

# String type
string name = "Alice";
string message = "Hello, World!";
string empty = "";

# Boolean type
bool isActive = true;
bool isComplete = false;

# Special types
void        # Used for functions that don't return a value
func        # Function type for first-class functions
obj         # Object type for class instances</code></pre>
                        </div>

                        <h3>Type Declarations</h3>
                        <div class="code-block">
                            <pre><code># Basic syntax: type name = value;
int count = 0;
string greeting = "Hello";
bool flag = true;

# All variables must be initialized
# int uninitialized;  # ‚ùå Error: Variables must be initialized

# Type must match the assigned value
# int number = "text";  # ‚ùå Error: Type mismatch</code></pre>
                        </div>
                    </section>

                    <section id="mutability" class="docs-section">
                        <h2>Mutability Control</h2>
                        <p>One of Gem's most powerful features is its explicit mutability control. Variables are immutable by default, preventing accidental modifications and making code more predictable.</p>

                        <h3>Immutable Variables (Default)</h3>
                        <div class="code-block">
                            <pre><code># Variables are immutable by default
string name = "Alice";
int age = 25;
bool isActive = true;

# Attempting to modify immutable variables causes compile errors
# name = "Bob";        # ‚ùå Error: Cannot assign to immutable variable
# age = 26;           # ‚ùå Error: Cannot assign to immutable variable
# isActive = false;   # ‚ùå Error: Cannot assign to immutable variable</code></pre>
                        </div>

                        <h3>Mutable Variables</h3>
                        <div class="code-block">
                            <pre><code># Use ! suffix to make variables mutable
string! name = "Alice";
int! counter = 0;
bool! flag = false;

# Mutable variables can be reassigned
name = "Bob";           # ‚úÖ Valid: Variable is mutable
counter = counter + 1;  # ‚úÖ Valid: Variable is mutable
flag = !flag;           # ‚úÖ Valid: Variable is mutable

# Type must still match
# counter = "text";     # ‚ùå Error: Type mismatch</code></pre>
                        </div>

                        <h3>Function Parameters</h3>
                        <div class="code-block">
                            <pre><code># Function parameters are immutable by default
def processName(string name) string
    # name = "Modified";  # ‚ùå Error: Cannot modify parameter
    return "Processed: " + name;
end

# Mutable parameters must be explicitly marked
def incrementCounter(int! counter) void
    counter = counter + 1;  # ‚úÖ Valid: Parameter is mutable
end

# Mixed parameter types
def processData(string data, int! counter, bool flag) string
    # data = "new";      # ‚ùå Error: data is immutable
    counter = counter + 1; # ‚úÖ Valid: counter is mutable
    # flag = !flag;      # ‚ùå Error: flag is immutable
    return data + " processed";
end</code></pre>
                        </div>

                        <h3>Benefits of Immutability</h3>
                        <ul>
                            <li><strong>Prevents Bugs</strong> - Accidental modifications are caught at compile time</li>
                            <li><strong>Easier Reasoning</strong> - Values don't change unexpectedly</li>
                            <li><strong>Thread Safety</strong> - Immutable data is inherently thread-safe</li>
                            <li><strong>Functional Style</strong> - Encourages functional programming patterns</li>
                        </ul>
                    </section>

                    <section id="nullability" class="docs-section">
                        <h2>Nullability Safety</h2>
                        <p>Gem eliminates null pointer exceptions through its nullability system. Variables cannot be null unless explicitly marked as nullable.</p>

                        <h3>Non-Nullable Types (Default)</h3>
                        <div class="code-block">
                            <pre><code># Variables are non-nullable by default
string name = "Alice";
int age = 25;
obj person = Person("Bob");

# Cannot assign nil to non-nullable variables
# name = nil;    # ‚ùå Error: Cannot assign nil to non-nullable variable
# age = nil;     # ‚ùå Error: Cannot assign nil to non-nullable variable
# person = nil;  # ‚ùå Error: Cannot assign nil to non-nullable variable</code></pre>
                        </div>

                        <h3>Nullable Types</h3>
                        <div class="code-block">
                            <pre><code># Use ? suffix to allow nil values
string? optionalName = nil;
int? optionalAge = nil;
obj? optionalPerson = nil;

# Nullable variables can be assigned both values and nil
optionalName = "Alice";     # ‚úÖ Valid
optionalName = nil;         # ‚úÖ Valid

optionalAge = 25;           # ‚úÖ Valid
optionalAge = nil;          # ‚úÖ Valid</code></pre>
                        </div>

                        <h3>Safe Null Checking</h3>
                        <div class="code-block">
                            <pre><code># Must check for nil before using nullable values
def greetOptional(string? name) string
    if (name != nil)
        return "Hello, " + name;  # Safe: name is guaranteed non-nil here
    else
        return "Hello, stranger!";
    end
end

# Using nullable values
string? userName = getUserName();
if (userName != nil)
    puts "Welcome, " + userName;
else
    puts "Please log in";
end</code></pre>
                        </div>

                        <h3>Nullable Function Returns</h3>
                        <div class="code-block">
                            <pre><code># Functions can return nullable types for error handling
def divide(int x, int y) int?
    if (y == 0)
        return nil;  # Return nil for division by zero
    else
        return x / y;
    end
end

# Safe usage of nullable returns
int? result = divide(10, 2);
if (result != nil)
    puts "Result: " + result;
else
    puts "Division by zero!";
end</code></pre>
                        </div>
                    </section>

                    <section id="combined" class="docs-section">
                        <h2>Combined Modifiers</h2>
                        <p>Gem allows combining mutability and nullability modifiers for maximum flexibility.</p>

                        <h3>Mutable and Nullable (?!)</h3>
                        <div class="code-block">
                            <pre><code># Variables that are both mutable and nullable
string?! mutableOptional = nil;
int?! counter = 0;
obj?! currentUser = nil;

# Can assign values, nil, and reassign
mutableOptional = "Hello";      # ‚úÖ Valid
mutableOptional = nil;          # ‚úÖ Valid
mutableOptional = "World";      # ‚úÖ Valid

counter = 42;                   # ‚úÖ Valid
counter = nil;                  # ‚úÖ Valid
counter = counter + 1;          # ‚úÖ Valid (if not nil)</code></pre>
                        </div>

                        <h3>All Modifier Combinations</h3>
                        <div class="code-block">
                            <pre><code># All possible type modifier combinations
string name = "Alice";          # Immutable, non-nullable
string! mutableName = "Bob";    # Mutable, non-nullable
string? optionalName = nil;     # Immutable, nullable
string?! flexibleName = nil;    # Mutable, nullable

# Usage patterns
def processUser(string?! currentUser) void
    if (currentUser == nil)
        currentUser = getDefaultUser();  # Can assign because mutable
    end
    
    if (currentUser != nil)
        currentUser.process();           # Safe because checked
    end
end</code></pre>
                        </div>

                        <h3>Function Parameters with Modifiers</h3>
                        <div class="code-block">
                            <pre><code># Functions with various parameter types
def complexFunction(
    string data,           # Immutable, non-nullable
    string! buffer,        # Mutable, non-nullable
    string? optional,      # Immutable, nullable
    string?! flexible      # Mutable, nullable
) string
    # Process each parameter according to its type
    if (optional != nil)
        buffer = buffer + optional;
    end
    
    if (flexible == nil)
        flexible = "default";
    end
    
    return buffer + data;
end</code></pre>
                        </div>
                    </section>

                    <section id="type-checking" class="docs-section">
                        <h2>Compile-Time Type Checking</h2>
                        <p>Gem performs comprehensive type checking at compile time, catching errors before your code runs.</p>

                        <h3>Type Mismatch Detection</h3>
                        <div class="code-block">
                            <pre><code># Type mismatches are caught at compile time
int age = 25;
string name = "Alice";

# These would cause compile errors:
# age = "twenty-five";    # ‚ùå Error: Cannot assign string to int
# name = 42;              # ‚ùå Error: Cannot assign int to string
# age = name;             # ‚ùå Error: Cannot assign string to int</code></pre>
                        </div>

                        <h3>Function Type Checking</h3>
                        <div class="code-block">
                            <pre><code># Function signatures are strictly enforced
def greet(string name, int age) string
    return "Hello " + name + ", age " + age;
end

# Correct usage
string greeting = greet("Alice", 25);

# These would cause compile errors:
# greet(25, "Alice");           # ‚ùå Error: Wrong argument types
# greet("Alice");               # ‚ùå Error: Missing argument
# greet("Alice", 25, true);     # ‚ùå Error: Too many arguments
# int result = greet("Alice", 25); # ‚ùå Error: Wrong return type</code></pre>
                        </div>

                        <h3>Mutability Checking</h3>
                        <div class="code-block">
                            <pre><code># Mutability violations are caught at compile time
string immutable = "Hello";
string! mutable = "World";

# These would cause compile errors:
# immutable = "Hi";             # ‚ùå Error: Cannot modify immutable
# immutable = mutable;          # ‚ùå Error: Cannot modify immutable

# Valid operations
mutable = "Hi";                 # ‚úÖ Valid: mutable variable
mutable = immutable;            # ‚úÖ Valid: reading immutable is fine</code></pre>
                        </div>

                        <h3>Nullability Checking</h3>
                        <div class="code-block">
                            <pre><code># Null safety violations are caught at compile time
string name = "Alice";
string? optionalName = nil;

# These would cause compile errors:
# name = nil;                   # ‚ùå Error: Cannot assign nil to non-nullable
# puts optionalName;            # ‚ùå Error: Must check for nil first

# Safe operations
if (optionalName != nil)
    puts optionalName;          # ‚úÖ Valid: nil check performed
end</code></pre>
                        </div>
                    </section>

                    <section id="advanced" class="docs-section">
                        <h2>Advanced Type Features</h2>
                        <p>Gem's type system includes advanced features for complex programming scenarios.</p>

                        <h3>Function Types</h3>
                        <div class="code-block">
                            <pre><code># Functions are first-class values with types
def add(int x, int y) int
    return x + y;
end

def multiply(int x, int y) int
    return x * y;
end

# Functions can be passed as parameters
def calculate(int x, int y, func operation) int
    return operation(x, y);
end

# Usage
int sum = calculate(5, 3, add);        # 8
int product = calculate(5, 3, multiply); # 15</code></pre>
                        </div>

                        <h3>Object Types</h3>
                        <div class="code-block">
                            <pre><code># Classes define object types
class Person
    def init(string name, int age) void
        this.name = name;
        this.age = age;
    end
    
    def greet() string
        return "Hello, I'm " + this.name;
    end
end

# Object variables have the obj type
obj person = Person("Alice", 25);
obj? optionalPerson = nil;

# Type checking applies to objects
# person = "not an object";     # ‚ùå Error: Type mismatch</code></pre>
                        </div>

                        <h3>Type Safety in Practice</h3>
                        <div class="code-block">
                            <pre><code># Real-world example: User management system
class User
    def init(string name, string? email) void
        this.name = name;
        this.email = email;
    end
    
    def hasEmail() bool
        return this.email != nil;
    end
    
    def getDisplayName() string
        if (this.email != nil)
            return this.name + " (" + this.email + ")";
        else
            return this.name;
        end
    end
end

# Type-safe user management
obj?! currentUser = nil;

def login(string username, string? email) bool
    if (username != "")
        currentUser = User(username, email);
        return true;
    else
        return false;
    end
end

def logout() void
    currentUser = nil;
end

def getCurrentUserName() string?
    if (currentUser != nil)
        return currentUser.name;
    else
        return nil;
    end
end</code></pre>
                        </div>

                        <div class="info-box">
                            <h4>üí° Type System Benefits</h4>
                            <ul>
                                <li><strong>Eliminates Runtime Errors</strong> - Null pointer exceptions and type errors are impossible</li>
                                <li><strong>Better IDE Support</strong> - Accurate autocomplete and refactoring tools</li>
                                <li><strong>Self-Documenting Code</strong> - Types serve as inline documentation</li>
                                <li><strong>Fearless Refactoring</strong> - Type checker catches breaking changes</li>
                                <li><strong>Performance</strong> - No runtime type checking overhead</li>
                            </ul>
                        </div>
                    </section>
                </article>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <span class="gem-icon">üíé</span>
                    <span>Gem Programming Language</span>
                </div>
                <div class="footer-links">
                    <a href="https://github.com/SimuCorps/Gem" target="_blank">GitHub</a>
                    <a href="getting-started.html">Documentation</a>
                    <a href="examples.html">Examples</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 SimuCorps LLC</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html> 