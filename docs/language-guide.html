<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Language Guide - Gem Programming Language</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="docs.css">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="index.html" style="display: flex; align-items: center; gap: 0.5rem; text-decoration: none; color: inherit;">
                    <span class="gem-icon">üíé</span>
                    <span class="brand-text">Gem</span>
                </a>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="getting-started.html" class="nav-link">Getting Started</a></li>
                <li><a href="language-guide.html" class="nav-link active">Language Guide</a></li>
                <li><a href="examples.html" class="nav-link">Examples</a></li>
                <li><a href="changeblog.html" class="nav-link">Changeblog</a></li>
                <li><a href="https://github.com/SimuCorps/Gem" class="nav-link" target="_blank">GitHub</a></li>
            </ul>
        </div>
    </nav>

    <main class="docs-main">
        <div class="container">
            <div class="docs-layout">
                <aside class="docs-sidebar">
                    <nav class="docs-nav">
                        <h3>Language Guide</h3>
                        <ul>
                            <li><a href="#overview">Overview</a></li>
                            <li><a href="#syntax">Syntax</a></li>
                            <li><a href="#types">Type System</a></li>
                            <li><a href="#hashes">Hashes</a></li>
                            <li><a href="#type-coercion">Type Coercion</a></li>
                            <li><a href="#variables">Variables</a></li>
                            <li><a href="#functions">Functions</a></li>
                            <li><a href="#classes">Classes</a></li>
                            <li><a href="#control-flow">Control Flow</a></li>
                            <li><a href="#modules">Modules</a></li>
                            <li><a href="#memory">Memory Safety</a></li>
                        </ul>
                    </nav>
                </aside>

                <article class="docs-content">
                    <header class="docs-header">
                        <h1>Gem Language Guide</h1>
                        <p class="docs-subtitle">Complete reference for Gem's syntax, features, and programming concepts</p>
                    </header>

                    <section id="overview" class="docs-section">
                        <h2>Language Overview</h2>
                        <p>Gem is a statically-typed programming language designed for safety, performance, and developer productivity. It combines modern language features with compile-time guarantees to prevent common programming errors.</p>

                        <h3>Key Principles</h3>
                        <ul>
                            <li><strong>Safety First</strong> - Memory safety and type safety are built into the language</li>
                            <li><strong>Explicit is Better</strong> - Clear, explicit syntax over implicit behavior</li>
                            <li><strong>Immutable by Default</strong> - Variables are immutable unless explicitly marked mutable</li>
                            <li><strong>Null Safety</strong> - Nullable types prevent null reference errors</li>
                            <li><strong>Zero-Cost Abstractions</strong> - High-level features with minimal runtime overhead</li>
                        </ul>

                        <h3>Program Structure</h3>
                        <div class="code-block">
                            <pre><code># Comments start with #
# This is a simple Gem program

# Variable declarations
string message = "Hello, World!"
int count = 42

# Function definition
def greet(string name) string
    return "Hello, #{name}!"
end

# Main execution
puts message
puts greet("Gem")</code></pre>
                        </div>
                    </section>

                    <section id="syntax" class="docs-section">
                        <h2>Syntax and Statement Terminators</h2>
                        <p>Gem features flexible statement termination that prioritizes readability and developer convenience.</p>

                        <h3>Optional Semicolons</h3>
                        <p>In Gem, semicolons are <strong>optional</strong>. Statements can be terminated with either semicolons or newlines, giving you the flexibility to choose the style that works best for your code.</p>

                        <div class="code-block">
                            <pre><code># Newline-terminated statements (recommended)
string name = "Alice"
int age = 30
puts "Hello, " + name

# Semicolon-terminated statements (traditional)
string name = "Alice";
int age = 30;
puts "Hello, " + name;

# Mixed style (both work)
string name = "Alice"
int age = 30;
puts "Hello, " + name</code></pre>
                        </div>

                        <h3>When Semicolons Are Required</h3>
                        <p>Semicolons are still required when you want to place multiple statements on the same line:</p>

                        <div class="code-block">
                            <pre><code># Multiple statements on one line require semicolons
int x = 10; int y = 20; puts x + y

# This would be an error:
# int x = 10 int y = 20 puts x + y  # ‚ùå Error

# Prefer separate lines for better readability:
int x = 10
int y = 20
puts x + y</code></pre>
                        </div>

                        <h3>Best Practices</h3>
                        <ul>
                            <li><strong>Use newlines</strong> - They're cleaner and more readable</li>
                            <li><strong>Be consistent</strong> - Pick one style and stick with it in your project</li>
                            <li><strong>Semicolons for inline</strong> - Use semicolons only when placing multiple statements on one line</li>
                            <li><strong>Follow your team</strong> - Match the style of your existing codebase</li>
                        </ul>
                    </section>

                    <section id="types" class="docs-section">
                        <h2>Type System</h2>
                        <p>Gem features a rich static type system with enhanced safety features.</p>

                        <h3>Basic Types</h3>
                        <div class="code-block">
                            <pre><code># Primitive types
int number = 42;           # Integer numbers
string text = "Hello";     # Text strings
bool flag = true;          # Boolean values (true/false)

# Special types
void                       # Used for functions that don't return a value
func                       # Function type for first-class functions
obj                        # Object type for class instances</code></pre>
                        </div>

                        <h3>Type Modifiers</h3>
                        <p>Gem uses the <code>mut</code> keyword and suffix modifiers to control mutability and nullability:</p>

                        <div class="code-block">
                            <pre><code># Mutability with 'mut' keyword (recommended)
mut string mutableText = "Can change";     # Mutable variable
mutableText = "Changed!";                  # ‚úÖ Valid

# Mutability with '!' suffix (syntactic sugar)
string! alsoMutable = "Can change";        # Alternative syntax
alsoMutable = "Changed!";                  # ‚úÖ Valid

# Nullability modifier (?)
string? optionalText = nil;                # Can be nil
optionalText = "Some text";                # ‚úÖ Valid
optionalText = nil;                        # ‚úÖ Valid

# Combined: mutable and nullable
mut string? mutableOptional = nil;         # Recommended syntax
string?! alsoMutableOptional = nil;        # Alternative syntax
mutableOptional = "Text";                  # ‚úÖ Valid
mutableOptional = nil;                     # ‚úÖ Valid</code></pre>
                        </div>

                        <h3>Type Safety Rules</h3>
                        <ul>
                            <li>All variables must have explicit types</li>
                            <li>Type mismatches are caught at compile time</li>
                            <li>Immutable variables cannot be reassigned</li>
                            <li>Non-nullable variables cannot be assigned <code>nil</code></li>
                            <li>Nullable variables must be checked before use</li>
                        </ul>
                    </section>

                    <section id="hashes" class="docs-section">
                        <h2>Hashes</h2>
                        <p>Hashes are key-value data structures that allow you to store and retrieve data using string or numeric keys.</p>

                        <h3>Hash Declaration</h3>
                        <div class="code-block">
                            <pre><code># Hash declaration with explicit mutability
hash! userInfo = {"name": "Alice", "age": 30, "active": true};

# Immutable hash (read-only after creation)
hash readonlyData = {"version": "1.0", "stable": true};

# Empty hash
hash! emptyHash = {};</code></pre>
                        </div>

                        <h3>Accessing Hash Values</h3>
                        <div class="code-block">
                            <pre><code># Access values using bracket notation
hash! person = {"name": "Bob", "age": 25, "city": "New York"};

string name = person["name"] as string;     # "Bob"
int age = person["age"] as int;             # 25
string city = person["city"] as string;    # "New York"

# Non-existent keys return nil
string missing = person["missing"] as string;  # "nil"</code></pre>
                        </div>

                        <h3>Modifying Hash Values</h3>
                        <div class="code-block">
                            <pre><code># Only mutable hashes can be modified
hash! mutableHash = {"count": 0, "status": "pending"};

# Update existing values
mutableHash["count"] = 5;
mutableHash["status"] = "completed";

# Add new key-value pairs
mutableHash["timestamp"] = "2025-01-01";

# This would be an error with immutable hash:
# hash immutableHash = {"key": "value"};
# immutableHash["key"] = "new value";  # ‚ùå Error: Cannot modify immutable hash</code></pre>
                        </div>

                        <h3>Hash Keys</h3>
                        <div class="code-block">
                            <pre><code># String keys (most common)
hash! stringKeys = {"name": "Alice", "role": "admin"};

# Numeric keys (automatically converted to strings)
hash! numericKeys = {1: "first", 2: "second", 42: "answer"};

# Mixed keys
hash! mixedKeys = {"name": "Bob", 1: "first", "active": true};</code></pre>
                        </div>

                        <h3>Hash Best Practices</h3>
                        <ul>
                            <li>Use descriptive string keys for better readability</li>
                            <li>Always cast hash values to the expected type using <code>as</code></li>
                            <li>Check for key existence when accessing potentially missing values</li>
                            <li>Use mutable hashes (<code>hash!</code>) only when you need to modify them</li>
                        </ul>
                    </section>

                    <section id="type-coercion" class="docs-section">
                        <h2>Type Coercion</h2>
                        <p>Type coercion allows you to explicitly convert values between different types using the <code>as</code> keyword.</p>

                        <h3>Basic Type Conversions</h3>
                        <div class="code-block">
                            <pre><code># Number to string conversion
int number = 42;
string numberStr = number as string;        # "42"

# String to number conversion
string numericStr = "123";
int parsed = numericStr as int;             # 123

# Decimal strings are converted to their numeric value
string decimalStr = "3.14159";
int decimal = decimalStr as int;            # 3.14159

# Boolean to string conversion
bool isActive = true;
string activeStr = isActive as string;     # "true"

# Nil to string conversion
string nilStr = nil as string;             # "nil"</code></pre>
                        </div>

                        <h3>Truthiness</h3>
                        <p>In Gem, only <code>false</code> and <code>nil</code> are falsey. All other values, including <code>0</code> and empty strings, are truthy.</p>

                        <div class="code-block">
                            <pre><code># Numbers are truthy (including zero!)
int zero = 0;
int negative = -5;
int positive = 42;

bool zeroIsTruthy = zero as bool;           # true
bool negativeIsTruthy = negative as bool;   # true
bool positiveIsTruthy = positive as bool;   # true

# Strings are truthy (including empty strings!)
string empty = "";
string nonEmpty = "hello";

bool emptyIsTruthy = empty as bool;         # true
bool nonEmptyIsTruthy = nonEmpty as bool;   # true

# Only false and nil are falsey
bool stillFalse = false as bool;            # false
bool stillNil = nil as bool;                # false (nil converts to false)</code></pre>
                        </div>

                        <h3>Hash Value Coercion</h3>
                        <div class="code-block">
                            <pre><code># Extract and convert hash values
hash! userData = {"name": "Charlie", "age": 28, "score": 0, "active": true};

# Extract with type coercion
string name = userData["name"] as string;
int age = userData["age"] as int;
bool active = userData["active"] as bool;

# Zero from hash is still truthy
bool scoreActive = userData["score"] as bool;  # true (0 is truthy!)

# Missing keys return nil, which converts to "nil" string or false boolean
string missing = userData["missing"] as string;  # "nil"
bool missingBool = userData["missing"] as bool;  # false</code></pre>
                        </div>

                        <h3>Identity Casts</h3>
                        <div class="code-block">
                            <pre><code># Casting to the same type (no-op, but sometimes useful for clarity)
string alreadyString = "test";
string stillString = alreadyString as string;  # "test"

int alreadyInt = 100;
int stillInt = alreadyInt as int;              # 100

bool alreadyBool = true;
bool stillBool = alreadyBool as bool;          # true</code></pre>
                        </div>

                        <h3>Type Coercion Rules</h3>
                        <ul>
                            <li><strong>Numbers to strings</strong>: Converted to their string representation</li>
                            <li><strong>Strings to numbers</strong>: Parsed as numeric values (must be valid numbers)</li>
                            <li><strong>Booleans to strings</strong>: <code>true</code> ‚Üí <code>"true"</code>, <code>false</code> ‚Üí <code>"false"</code></li>
                            <li><strong>Nil to strings</strong>: Always converts to <code>"nil"</code></li>
                            <li><strong>Any to boolean</strong>: Only <code>false</code> and <code>nil</code> are falsey</li>
                            <li><strong>Identity casts</strong>: Casting to the same type returns the original value</li>
                        </ul>

                        <div class="info-box">
                            <h4>üí° Truthiness</h4>
                            <p>Unlike many languages where <code>0</code>, empty strings, or empty collections are falsey, in Gem, only <code>false</code> and <code>nil</code> are considered falsey. This makes boolean logic more predictable and explicit.</p>
                            <ul>
                                <li><code>0 as bool</code> ‚Üí <code>true</code> ‚úÖ</li>
                                <li><code>"" as bool</code> ‚Üí <code>true</code> ‚úÖ</li>
                                <li><code>false as bool</code> ‚Üí <code>false</code> ‚ùå</li>
                                <li><code>nil as bool</code> ‚Üí <code>false</code> ‚ùå</li>
                            </ul>
                        </div>
                    </section>

                    <section id="variables" class="docs-section">
                        <h2>Variables</h2>
                        <p>Variables in Gem are immutable by default and require explicit type declarations.</p>

                        <h3>Declaration Syntax</h3>
                        <div class="code-block">
                            <pre><code># Recommended syntax with 'mut' keyword
int age = 25;                        # Immutable integer
mut string name = "Alice";           # Mutable string
bool? isActive = nil;                # Nullable boolean
mut string? status = "pending";      # Mutable and nullable

# Alternative syntax with '!' suffix (syntactic sugar)
string! altName = "Bob";             # Mutable string (alternative)
string?! altStatus = "active";       # Mutable and nullable (alternative)</code></pre>
                        </div>

                        <h3>Scope Rules</h3>
                        <div class="code-block">
                            <pre><code># Variables are scoped to their declaration block
int x = 10;

begin
    int y = 20;
    puts x;  # ‚úÖ Valid: x is in scope
    puts y;  # ‚úÖ Valid: y is in scope
end

puts x;  # ‚úÖ Valid: x is still in scope
# puts y;  # ‚ùå Error: y is out of scope</code></pre>
                        </div>

                        <h3>Mutability Examples</h3>
                        <div class="code-block">
                            <pre><code># Immutable variables (default)
string greeting = "Hello";
# greeting = "Hi";  # ‚ùå Error: Cannot modify immutable variable

# Mutable variables (recommended syntax)
mut string mutableGreeting = "Hello";
mutableGreeting = "Hi";  # ‚úÖ Valid: Variable is mutable

# Mutable variables (alternative syntax with '!' suffix)
string! altMutableGreeting = "Hello";
altMutableGreeting = "Hi";  # ‚úÖ Valid: Variable is mutable

# Function parameters are immutable by default
def processText(string text) string
    # text = "modified";  # ‚ùå Error: Parameter is immutable
    return "Processed: " + text;
end</code></pre>
                        </div>
                    </section>

                    <section id="functions" class="docs-section">
                        <h2>Functions</h2>
                        <p>Functions in Gem are first-class values with strong type checking.</p>

                        <h3>Function Declaration</h3>
                        <div class="code-block">
                            <pre><code># Basic function syntax
def functionName(type param1, type param2) returnType
    # function body
    return value;
end

# Examples
def add(int x, int y) int
    return x + y;
end

def greet(string name) string
    return "Hello, #{name}!";
end

def printMessage(string message) void
    puts message;
    # void functions don't need explicit return
end</code></pre>
                        </div>

                        <h3>Function Parameters</h3>
                        <div class="code-block">
                            <pre><code># Parameters with different modifiers
def processData(
    string data,               # Immutable parameter
    mut string buffer,         # Mutable parameter (recommended)
    string? optional,          # Nullable parameter
    mut string? mutableOpt     # Mutable and nullable (recommended)
) string
    if (optional != nil)
        buffer = buffer + optional;
    end
    return buffer + data;
end

# Alternative syntax with '!' suffix
def processDataAlt(
    string data,               # Immutable parameter
    string! buffer,            # Mutable parameter (alternative)
    string? optional,          # Nullable parameter
    string?! mutableOpt        # Mutable and nullable (alternative)
) string
    if (optional != nil)
        buffer = buffer + optional;
    end
    return buffer + data;
end</code></pre>
                        </div>

                        <h3>Higher-Order Functions</h3>
                        <div class="code-block">
                            <pre><code># Functions as parameters
def applyOperation(int x, int y, func operation) int
    return operation(x, y);
end

def multiply(int a, int b) int
    return a * b;
end

# Usage
int result = applyOperation(5, 3, multiply);  # 15</code></pre>
                        </div>
                    </section>

                    <section id="classes" class="docs-section">
                        <h2>Classes and Objects</h2>
                        <p>Gem supports object-oriented programming with classes, inheritance, and encapsulation.</p>

                        <h3>Class Definition</h3>
                        <div class="code-block">
                            <pre><code># Basic class structure
class ClassName
    # Constructor
    def init(parameters) void
        # Initialize instance variables
    end
    
    # Methods
    def methodName(parameters) returnType
        # method body
    end
end

# Example
class Person
    def init(string name, int age) void
        this.name = name;
        this.age = age;
    end
    
    def getName() string
        return this.name;
    end
    
    def getAge() int
        return this.age;
    end
    
    def introduce() string
        return "Hi, I'm " + this.name + ", age " + this.age;
    end
end</code></pre>
                        </div>

                        <h3>Object Creation and Usage</h3>
                        <div class="code-block">
                            <pre><code># Creating objects
obj person = Person("Alice", 30);

# Calling methods
string name = person.getName();
string intro = person.introduce();
puts intro;  # "Hi, I'm Alice, age 30"</code></pre>
                        </div>

                        <h3>Inheritance</h3>
                        <div class="code-block">
                            <pre><code># Base class
class Animal
    def init(string name) void
        this.name = name;
    end
    
    def speak() string
        return "Some sound";
    end
end

# Derived class
class Dog : Animal
    def init(string name, string breed) void
        super.init(name);  # Call parent constructor
        this.breed = breed;
    end
    
    def speak() string  # Override parent method
        return "Woof!";
    end
    
    def getBreed() string
        return this.breed;
    end
end

# Usage
obj dog = Dog("Buddy", "Labrador");
puts dog.speak();     # "Woof!"
puts dog.getBreed();  # "Labrador"</code></pre>
                        </div>
                    </section>

                    <section id="control-flow" class="docs-section">
                        <h2>Control Flow</h2>
                        <p>Gem provides standard control flow constructs with type-safe conditions.</p>

                        <h3>Conditionals</h3>
                        <div class="code-block">
                            <pre><code># if-else statements
if (condition)
    # code block
else if (otherCondition)
    # code block
else
    # code block
end

# Example
int age = 20;
if (age >= 18)
    puts "Adult";
else
    puts "Minor";
end

# Ternary operator
string status = age >= 18 ? "Adult" : "Minor";</code></pre>
                        </div>

                        <h3>Loops</h3>
                        <div class="code-block">
                            <pre><code># For loops
for (int! i = 0; i < 10; i = i + 1)
    puts i;
end

# While loops
int! count = 0;
while (count < 5)
    puts "Count: " + count;
    count = count + 1;
end

# Loop with break and continue
for (int! i = 0; i < 20; i = i + 1)
    if (i % 2 == 0)
        continue;  # Skip even numbers
    end
    
    if (i > 15)
        break;     # Exit loop
    end
    
    puts i;
end</code></pre>
                        </div>
                    </section>

                    <section id="modules" class="docs-section">
                        <h2>Modules</h2>
                        <p>Modules provide a way to organize and reuse code across different parts of your program.</p>

                        <h3>Module Definition</h3>
                        <div class="code-block">
                            <pre><code># math_utils.gem
module MathUtils
    def square(int x) int
        return x * x;
    end
    
    def cube(int x) int
        return x * x * x;
    end
    
    def factorial(int n) int
        if (n <= 1)
            return 1;
        else
            return n * factorial(n - 1);
        end
    end
end</code></pre>
                        </div>

                        <h3>Using Modules</h3>
                        <div class="code-block">
                            <pre><code># Import and use modules
require "math_utils";

int squared = MathUtils.square(5);      # 25
int cubed = MathUtils.cube(3);          # 27
int fact = MathUtils.factorial(5);      # 120</code></pre>
                        </div>

                        <h3>Standard Library Modules</h3>
                        <div class="code-block">
                            <pre><code># Built-in modules
require "math";

# Math utilities
int sum = Math.add(10, 5);
int max = Math.max(10, 20);
int power = Math.power(2, 8);</code></pre>
                        </div>
                    </section>

                    <section id="memory" class="docs-section">
                        <h2>Memory Safety</h2>
                        <p>Gem provides automatic memory management with compile-time safety guarantees.</p>

                        <h3>Scope-Based Management</h3>
                        <div class="code-block">
                            <pre><code># Objects are automatically cleaned up when scope ends
def processData() void
    begin
        obj resource = DataResource("file.txt");
        resource.process();
        # resource is automatically cleaned up here
    end
    # resource is no longer accessible
end</code></pre>
                        </div>

                        <h3>Borrow Checking</h3>
                        <div class="code-block">
                            <pre><code># Gem prevents use-after-drop at compile time
def borrowExample() void
    obj resource = SomeResource("data");
    
    begin
        # resource is borrowed here
        string some_variable = resource.process()
    end
    
    puts some_variable;  # ‚ùå Compile error: use after potential drop
end
</code></pre>
                        </div>

                        <h3>Memory Safety Rules</h3>
                        <ul>
                            <li>Objects are automatically dropped when they go out of scope</li>
                            <li>No manual memory management required</li>
                            <li>Compile-time checks prevent use-after-drop</li>
                            <li>No null pointer dereferences</li>
                            <li>No memory leaks or double-free errors</li>
                        </ul>

                        <div class="info-box">
                            <h4>üí° Memory Safety Benefits</h4>
                            <ul>
                                <li>Eliminates entire classes of bugs</li>
                                <li>No runtime overhead for safety checks</li>
                                <li>Predictable performance characteristics</li>
                                <li>Easier to reason about program behavior</li>
                            </ul>
                        </div>
                    </section>
                </article>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <span class="gem-icon">üíé</span>
                    <span>Gem Programming Language</span>
                </div>
                <div class="footer-links">
                    <a href="https://github.com/SimuCorps/Gem" target="_blank">GitHub</a>
                    <a href="getting-started.html">Documentation</a>
                    <a href="examples.html">Examples</a>
                </div>
            </div>
            <div class="footer-bottom">
              <p>&copy; 2025 SimuCorps LLC</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html> 